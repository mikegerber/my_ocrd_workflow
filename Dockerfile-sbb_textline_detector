FROM my_ocrd_workflow-core


ENV SBB_TEXTLINE_DETECTOR_COMMIT 8b01d9e


# Build pip installable stuff
RUN pip3 install --no-cache-dir \
# Now the real stuff:
    https://github.com/qurator-spk/sbb_textline_detector/archive/$SBB_TEXTLINE_DETECTOR_COMMIT.tar.gz


# Copy OCR models
COPY data/textline_detection /var/lib/textline_detection


# Check pip dependencies
RUN pip3 check


# Default command
CMD ["ocrd-sbb-textline-detector"]
